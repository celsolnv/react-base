---
alwaysApply: false
---

description: PadrÃµes para geraÃ§Ã£o de Testes UnitÃ¡rios (Vitest)
globs: **/*.spec.ts, **/*.test.ts, **/*.ts, **/*.tsx

# PADRÃ•ES DE TESTE (VITEST)

Ao solicitar a criaÃ§Ã£o ou refatoraÃ§Ã£o de testes, siga estritamente:

## 1. Ferramentas
- Use `import { describe, it, expect, vi } from 'vitest'`.
- NÃ£o importe `jest`.
- Use `vi.fn()`, `vi.spyOn()` para mocks.

## 2. Estrutura do Teste
- **Describe:** Nome da classe ou funÃ§Ã£o.
- **Describe (aninhado):** Nome do mÃ©todo sendo testado.
- **It:** DescriÃ§Ã£o do comportamento esperado (ex: "should return X when Y is provided").

## 3. Checklist de Cobertura (Branch Coverage)
Para garantir cobertura alta, vocÃª DEVE gerar cenÃ¡rios para:
- âœ… **Happy Path:** O caso de uso padrÃ£o.
- âš ï¸ **Null/Undefined:** Se o argumento for opcional, teste a ausÃªncia dele.
- ðŸ›‘ **Error Handling:** Force erros para testar blocos `try/catch`.
- ðŸ”„ **Condicionais:** Para cada `if (x > 0)`, teste `x = 1` (true), `x = 0` (false) e `x = -1`.
- ðŸ“ **Boundaries:** Teste limites de strings (vazias, longas) e arrays.

## 4. Exemplo de PadrÃ£o
```typescript
describe('MyService', () => {
  describe('calculate', () => {
    it('should return correct sum', () => { ... })
    it('should throw error if input is negative', () => { ... })
    it('should handle undefined input gracefully', () => { ... })
  })
})